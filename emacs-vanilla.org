#+TITLE: Vanilla Emacs config
#+STARTUP: showall

* Introduction
:PROPERTIES:
:CUSTOM_ID: introduction
:END:
My Emacs sandbox, for experimenting with what [[https://www.spacemacs.org/][Spacemacs]] and [[https://github.com/hlissner/doom-emacs][Doom Emacs]] have to offer.

#+BEGIN_SRC sh :tangle sh/install-emacs-vanilla.sh
mkdir -p ~/.config/emacs-vanilla
ln -svf $PWD/out/emacs-vanilla-init ~/.config/emacs-vanilla/init.el
ln -svf $PWD/out/emacs-vanilla-early-init ~/.config/emacs-vanilla/early-init.el
#+END_SRC

** init.el
:PROPERTIES:
:CUSTOM_ID: init-el
:END:
*** straight.el
[[https://github.com/radian-software/straight.el][straight.el]]: next-generation, purely functional package manager for the Emacs hacker.

Configured as follows:
- Uses straight.el's =master= branch rather than =develop=
- Package modification checks are performed at slight cost to startup, in order to be perfectly reliable
- Clones over HTTPS
- Saves straight.el's build files and package repos in =user-emacs-directory= (=~/.config/emacs-vanilla=)
- Bootstrapped via chemacs2 profile with the =straight-p= variable ([[https://github.com/plexus/chemacs2/issues/24][chemacs2#24]])

Per straight.el, users of Emacs versions >= 27 will want to add:

#+BEGIN_SRC emacs-lisp :tangle out/emacs-vanilla-early-init
(setq package-enable-at-startup nil)
#+END_SRC

*** (MacOS) dired to use GNU ls
#+BEGIN_SRC emacs-lisp :tangle out/emacs-vanilla-init
(when (string= system-type "darwin")
  (setq dired-use-ls-dired t
        insert-directory-program "/usr/local/bin/gls"))
#+END_SRC

*** evil
Install and enable the [[https://www.emacswiki.org/emacs/Evil][Evil]] vi layer.

#+BEGIN_SRC emacs-lisp :tangle out/emacs-vanilla-init
(straight-use-package 'evil)
(require 'evil)
(evil-mode 1)
#+END_SRC
